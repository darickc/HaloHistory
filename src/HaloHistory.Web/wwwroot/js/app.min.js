"use strict";var mod=angular.module("cartographer",["ui.router","ngAnimate","ngResource","ngSanitize","angular-loading-bar","ngScrollTo"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(r,o,e){o.otherwise("/"),e.html5Mode(!0).hashPrefix("!")}]);
!function(){"use strict";angular.module("cartographer").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"main as vm",params:{error:null}}).state("main.player",{url:"{gamerTag}/",templateUrl:"app/player/player.html",controller:"player as vm",resolve:{playerData:["profileDataService","$stateParams",function(a,r){return a.getSpartanImageForUser(r.gamerTag)}]}}).state("main.player.gameHistory",{url:"game-history/{mode}/?start",templateUrl:"app/gameHistory/gameHistory.html",controller:"gameHistory as vm"}).state("main.player.gameHistory.match",{url:"match/{gameMode}/{id}/",templateUrl:"app/match/match.html",controller:"match as vm"})}])}();
!function(){"use strict";function o(){return function(o){return o.replace(/([a-z])([A-Z])/g,"$1 $2")}}angular.module("cartographer").filter("addspace",o).directive("goTo",["ScrollTo","$timeout",function(o,t){return{restrict:"AC",compile:function(){return function(r,n,e){n.bind("click",function(r){t(function(){o.idOrName(e.goTo,e.offset)},50)})}}}}]).directive("repeatDone",["gameHistoryService","$timeout",function(o,t){return function(r,n,e){r.$last&&o.scrollPosition&&t(function(){$(".cartographer").scrollTop(o.scrollPosition)},100)}}]).directive("saveScroll",["$rootScope","gameHistoryService",function(o,t){return function(r,n,e){o.$on("$stateChangeStart",function(o,r,n,i,c){i.name===e.saveScroll&&(t.scrollPosition=$(".cartographer").scrollTop())})}}])}();
!function(){"use strict";function r(){var r={};return r}angular.module("cartographer").factory("gameHistoryService",r),r.$inject=[]}();
!function(){"use strict";function r(r,e){function i(e){if(o.profiles[e]){var i=r.defer();return i.resolve(o.profiles[e]),i.promise}return o.profiles[e]=t.get({id:e}),o.profiles[e].$promise}var o=this;o.profiles=[];var t=e("api/profile/:id",{},{});return{getSpartanImageForUser:i}}angular.module("cartographer").factory("profileDataService",r),r.$inject=["$q","$resource"]}();
!function(){"use strict";function t(t,a){function e(t,a,e){return s.get({id:t,gameMode:a,start:e}).$promise}function r(t,a,e){return s.match({gamerTag:t,gameMode:a,id:e}).$promise}var s=a("api/stats/matches/:id/:gameMode?start=:start",{},{match:{url:"api/stats/matches/:gamerTag/:gameMode/:id",isArray:!1}});return{getMatchesForUser:e,getMatch:r}}angular.module("cartographer").factory("statsDataService",t),t.$inject=["$q","$resource"]}();
!function(){"use strict";function t(t,a,e,o,r){function n(){m()}function c(t){u.start=null,u.gameMode=t,m()}function s(t){0>t&&(t=0),u.start=t,m()}function i(t){u.start=t,m()}function m(){a.getMatchesForUser(t.gamertag,e.mode,e.start).then(function(t){u.matches=t,u.start=t.start})["catch"](function(){})}function g(t){r.go(".match",{gameMode:t.gameMode,id:t.matchId})}var u=this;u.title="gameHistory",u.start=0,u.mode=e.mode,u.getMatchesForGamemode=c,u.next=s,u.prev=i,u.goToMatch=g,n()}angular.module("cartographer").controller("gameHistory",t),t.$inject=["playerData","statsDataService","$stateParams","gameHistoryService","$state"]}();
!function(){"use strict";function e(e,a){function r(){if(m.canRemember="undefined"!=typeof Storage,m.canRemember&&e.is("main")){var a=localStorage.getItem("gamerTag");a&&e.go("main.player.gameHistory",{gamerTag:a,mode:"All"})}}function t(a){return a.$valid?(m.rememberMe&&localStorage.setItem("gamerTag",m.gamerTag),void e.go("main.player.gameHistory",{gamerTag:m.gamerTag,mode:"All"})):void(a.submitted=!0)}var m=this;m.title="main",m.setUser=t,m.$state=e,m.error=a.error,r()}angular.module("cartographer").controller("main",e),e.$inject=["$state","$stateParams"]}();
!function(){"use strict";function e(e,a,t){function r(){e.getMatch(a.gamerTag,a.gameMode,a.id).then(function(e){var a=e.gameBaseVariantName.toUpperCase();a.search("CTF")>-1||a.search("FLAG")>-1?e.template="arena/ctf.html":a.search("STRONGHOLDS")>-1?e.template="arena/strongholds.html":a.search("BREAKOUT")>-1?e.template="arena/breakout.html":a.search("FIREFIGHT")>-1?e.template="warzone/firefight.html":a.search("WARZONE ASSAULT")>-1?e.template="warzone/assault.html":a.search("WARZONE")>-1?e.template="warzone/warzone.html":e.template="default.html",o.match=e,angular.forEach(e.teams,function(e){angular.forEach(e.players,function(e){n(e),angular.forEach(e.enemies,function(e){e.isPlayer&&c(e)})})})})["catch"](function(){})}function l(e){return null!=o.selectedPlayer&&(o.selectedPlayer.showDetails=!1,o.selectedPlayer.gamerTag===e.gamerTag)?void(o.selectedPlayer=null):(o.selectedPlayer=e,void(o.selectedPlayer.showDetails=!0))}function n(e){t.getSpartanImageForUser(e.gamerTag).then(function(a){e.profile=a})["catch"]()}function c(e){t.getSpartanImageForUser(e.name).then(function(a){e.profile=a})["catch"]()}var o=this;o.selectedPlayer=null,o.showDetails=l,r()}angular.module("cartographer").controller("match",e),e.$inject=["statsDataService","$stateParams","profileDataService"]}();
!function(){"use strict";function a(a,r){function e(){a.gamertag||(localStorage.removeItem("gamerTag"),r.go("main",{error:!0}))}function o(){localStorage.removeItem("gamerTag"),r.go("main",{error:!1})}var t=this;t.change=o,t.player=a,e()}angular.module("cartographer").controller("player",a),a.$inject=["playerData","$state"]}();